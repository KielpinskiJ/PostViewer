(function(){"use strict";var t={5442:function(t,e,s){var o=s(5130),r=s(9005),a=s(6768);const n={id:"app"};function i(t,e,s,o,r,i){const l=(0,a.g2)("PostList"),c=(0,a.g2)("PostDetails");return(0,a.uX)(),(0,a.CE)("div",n,[(0,a.bF)(l),o.postStore.selectedPost?((0,a.uX)(),(0,a.Wv)(c,{key:0,post:o.postStore.selectedPost},null,8,["post"])):(0,a.Q3)("",!0)])}var l=s(4232);const c=t=>((0,a.Qi)("data-v-a0382222"),t=t(),(0,a.jt)(),t),u={class:"posts-filters"},d=(0,a.Fv)('<option value="" data-v-a0382222>Sortuj według...</option><option value="alphabetical" data-v-a0382222>Alfabetycznie</option><option value="reverseAlphabetical" data-v-a0382222>Od końca alfabetu</option><option value="longest" data-v-a0382222>Najdłuższy post</option><option value="shortest" data-v-a0382222>Najkrótszy post</option>',5),p=[d],h=c((()=>(0,a.Lk)("option",{value:""},"Filtruj według użytkownika...",-1))),v=["value"],P={class:"post-wrapper"},f={key:0},S=c((()=>(0,a.Lk)("h2",null,"Wystąpił błąd podczas pobierania postów. Spróbuj ponownie później.",-1))),b=[S],g={class:"post-title"},y={class:"author"},k={class:"buttons"},w=["onClick"],L=["onClick"],m={class:"buttons-bottom"},A=["disabled"],E={class:"page-info"},C=["disabled"];function O(t,e,s,o,r,n){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",u,[(0,a.Lk)("select",{"aria-label":"Sortuj według",onChange:e[0]||(e[0]=t=>o.postStore.setSort(t.target.value))},p,32),(0,a.Lk)("select",{"aria-label":"Filtruj według użytkownika",onChange:e[1]||(e[1]=t=>o.postStore.setFilter(t.target.value))},[h,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.userStore.users,(t=>((0,a.uX)(),(0,a.CE)("option",{key:t.id,value:t.id},(0,l.v_)(t.name),9,v)))),128))],32),(0,a.Lk)("input",{onInput:e[2]||(e[2]=t=>o.postStore.setSearch(t.target.value)),placeholder:"Wyszukaj..."},null,32)]),(0,a.Lk)("div",P,[o.postStore.apiError?((0,a.uX)(),(0,a.CE)("div",f,b)):((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(o.postStore.posts,(t=>((0,a.uX)(),(0,a.CE)("div",{class:"post",key:t.id},[(0,a.Lk)("h2",g,(0,l.v_)(t.title),1),(0,a.Lk)("p",null,(0,l.v_)(t.body.substring(0,100))+"...",1),(0,a.Lk)("p",y,"Autor: "+(0,l.v_)(o.userStore.getUser(t.userId).name),1),(0,a.Lk)("div",k,[(0,a.Lk)("button",{class:"button button-view",onClick:e=>o.viewPost(t)},"Zobacz więcej",8,w),(0,a.Lk)("button",{class:"button button-delete",onClick:e=>o.deletePost(t.id)},"Usuń post",8,L)])])))),128))]),(0,a.Lk)("div",m,[(0,a.Lk)("button",{class:"button button-prev",onClick:e[3]||(e[3]=t=>o.postStore.prevPage()),disabled:1===o.postStore.page}," Poprzednia strona ",8,A),(0,a.Lk)("span",E,"Strona: "+(0,l.v_)(o.postStore.page)+" / "+(0,l.v_)(o.postStore.lastPage),1),(0,a.Lk)("button",{class:"button button-next",onClick:e[4]||(e[4]=t=>o.postStore.nextPage()),disabled:o.postStore.page>=o.postStore.lastPage.value}," Następna strona ",8,C)])])}var T=s(8355);const j=T.A.create({baseURL:"https://jsonplaceholder.typicode.com",headers:{Accept:"application/json","Content-Type":"application/json"}}),_={POSTS:"/posts",USERS:"/users"};async function U(t){try{const e=await t;return{success:!0,data:e.data}}catch(e){return{success:!1,error:"Problem with API call"}}}var I={getAllPosts(){return U(j.get(_.POSTS))},getPost(t){return U(j.get(`${_.POSTS}/${t}`))},getCommentsByPostId(t){return U(j.get(`${_.POSTS}/${t}/comments`))},getAllUsers(){return U(j.get(_.USERS))},getUser(t){return U(j.get(`${_.USERS}/${t}`))},deletePost(t){return U(j.delete(`${_.POSTS}/${t}`))}};const R=(0,r.nY)({id:"user",state:()=>({users:[]}),actions:{async loadAllUsers(){const t=await I.getAllUsers();this.users=t.data},getUser(t){return this.users.find((e=>e.id===t))}}});var x=R;const F={ALPHABETICAL:"alphabetical",REVERSE_ALPHABETICAL:"reverseAlphabetical",LONGEST:"longest",SHORTEST:"shortest"};function X(t,e){return e===F.ALPHABETICAL?t.sort(((t,e)=>t.title.localeCompare(e.title))):e===F.REVERSE_ALPHABETICAL?t.sort(((t,e)=>e.title.localeCompare(t.title))):e===F.LONGEST?t.sort(((t,e)=>e.body.length-t.body.length)):e===F.SHORTEST?t.sort(((t,e)=>t.body.length-e.body.length)):t}function $(t,e){return e?t.filter((t=>t.userId===e)):t}function z(t,e){if(e){const s=e.toLowerCase();return t.filter((t=>t.body.toLowerCase().includes(s)||t.title.toLowerCase().includes(s)))}return t}const W=10;var B=W;const H=(0,r.nY)({id:"post",state:()=>({allPosts:[],filteredPosts:[],posts:[],page:1,selectedPost:null,searchState:{sort:"",filter:"",search:""},apiError:!1}),getters:{lastPage(){return(0,a.EW)((()=>{const t=Math.ceil(this.filteredPosts.length/B);return 0===t?1:t}))}},actions:{async loadAllPosts(){const t=await I.getAllPosts();t.success?(this.allPosts=t.data,this.apiError=!1):(this.apiError=!0,console.error(t.error))},filterAndSortPosts(t,e,s){let o=[...this.allPosts];t&&(o=X(o,t)),e&&(o=$(o,e)),s&&(o=z(o,s)),this.filteredPosts=o},updatePosts(){this.posts=this.filteredPosts.slice((this.page-1)*B,this.page*B)},loadPosts(t,e,s){this.page=1,this.searchState={sort:t,filter:e,search:s},this.filterAndSortPosts(t,e,s),this.updatePosts()},deletePost(t){this.allPosts=this.allPosts.filter((e=>e.id!==t)),this.filteredPosts=this.filteredPosts.filter((e=>e.id!==t)),this.loadPosts(this.searchState.sort,this.searchState.filter,this.searchState.search)},nextPage(){this.page*B<this.filteredPosts.length&&(this.page+=1,this.updatePosts(),window.scrollTo({top:0,behavior:"smooth"}))},prevPage(){this.page>1&&(this.page-=1,this.updatePosts(),window.scrollTo({top:0,behavior:"smooth"}))},goToPage(t){t>=1&&t<=this.lastPage&&(this.page=t,this.updatePosts())},selectPost(t){this.selectedPost=t},setSort(t){this.searchState.sort=t,this.loadPosts(this.searchState.sort,this.searchState.filter,this.searchState.search)},setFilter(t){this.searchState.filter=Number(t),this.loadPosts(this.searchState.sort,this.searchState.filter,this.searchState.search)},setSearch(t){this.searchState.search=t,this.loadPosts(this.searchState.sort,this.searchState.filter,this.searchState.search)}}});var N=H,V={setup(){const t=x(),e=N();(0,a.sV)((async()=>{await t.loadAllUsers(),await e.loadAllPosts(),e.loadPosts(e.searchState.sort,e.searchState.filter,e.searchState.search)}));const s=async t=>{await I.deletePost(t),e.deletePost(t)},o=t=>{e.selectedPost=t};return{postStore:e,userStore:t,deletePost:s,viewPost:o}}},M=s(1241);const Q=(0,M.A)(V,[["render",O],["__scopeId","data-v-a0382222"]]);var D=Q;const G={key:0,class:"modal"},K={class:"buttons"};function Y(t,e,s,o,r,n){return s.post?((0,a.uX)(),(0,a.CE)("div",G,[(0,a.Lk)("h2",null,(0,l.v_)(s.post.title),1),(0,a.Lk)("p",null,(0,l.v_)(s.post.body),1),(0,a.Lk)("p",null,"Autor: "+(0,l.v_)(o.userStore.getUser(s.post.userId).name),1),(0,a.Lk)("div",K,[(0,a.Lk)("button",{class:"button button-back",onClick:e[0]||(e[0]=(...t)=>o.closePost&&o.closePost(...t))},"Wróć do listy postów"),(0,a.Lk)("button",{class:"button button-delete",onClick:e[1]||(e[1]=t=>o.deletePost(s.post.id))},"Usuń post")])])):(0,a.Q3)("",!0)}var Z={props:["post"],setup(){const t=N(),e=x();(0,a.sV)((async()=>{await e.loadAllUsers()}));const s=()=>{t.selectedPost=null},o=async e=>{await I.deletePost(e),t.deletePost(e),s()};return{deletePost:o,closePost:s,userStore:e}}};const q=(0,M.A)(Z,[["render",Y],["__scopeId","data-v-67ccef47"]]);var J=q,tt={components:{PostList:D,PostDetails:J},setup(){const t=N(),e=()=>{if(t.selectedPost){const t=window.innerWidth-document.documentElement.clientWidth;document.body.style.marginRight=`${t}px`,document.body.classList.add("modal-open")}else document.body.style.marginRight="0px",document.body.classList.remove("modal-open")};return(0,a.wB)((()=>t.selectedPost),e),(0,a.hi)((()=>{document.body.classList.remove("modal-open")})),{postStore:t}}};const et=(0,M.A)(tt,[["render",i]]);var st=et,ot=s(1387);const rt=[{path:"/",component:D}],at=(0,ot.aE)({history:(0,ot.LA)(),routes:rt});var nt=at;const it=(0,r.Ey)(),lt=(0,o.Ef)(st);lt.use(it),lt.use(nt),lt.mount("#app")}},e={};function s(o){var r=e[o];if(void 0!==r)return r.exports;var a=e[o]={exports:{}};return t[o].call(a.exports,a,a.exports,s),a.exports}s.m=t,function(){var t=[];s.O=function(e,o,r,a){if(!o){var n=1/0;for(u=0;u<t.length;u++){o=t[u][0],r=t[u][1],a=t[u][2];for(var i=!0,l=0;l<o.length;l++)(!1&a||n>=a)&&Object.keys(s.O).every((function(t){return s.O[t](o[l])}))?o.splice(l--,1):(i=!1,a<n&&(n=a));if(i){t.splice(u--,1);var c=r();void 0!==c&&(e=c)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[o,r,a]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var o in e)s.o(e,o)&&!s.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,o){var r,a,n=o[0],i=o[1],l=o[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(r in i)s.o(i,r)&&(s.m[r]=i[r]);if(l)var u=l(s)}for(e&&e(o);c<n.length;c++)a=n[c],s.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return s.O(u)},o=self["webpackChunkPostViewer"]=self["webpackChunkPostViewer"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=s.O(void 0,[504],(function(){return s(5442)}));o=s.O(o)})();
//# sourceMappingURL=app.eecbd11d.js.map